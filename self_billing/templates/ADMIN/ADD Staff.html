{#<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">#}
{#<html xmlns="http://www.w3.org/1999/xhtml">#}
{#<head>#}
{#<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />#}
{#<title>Untitled Document</title>#}
{#</head>#}
{##}
{#<body>#}
{% extends 'ADMIN/index.html' %}
{% block body %}
<form action="/addedstaff" method="post" enctype="multipart/form-data" name="form1" id="form1">
  <table width="200" border="1" class="table table-bordered table-hover table-white" style="width:500px;">
       <tr>
           <td class="bg-dark text-white" colspan="9" style="font-size: 20px" align="center"><b>ADD STAFF</b></td>
  </tr>
    <tr>
      <td>First Name </td>
      <td><label>
          <input type="text" name="textfield" required pattern="[A-Z a-z.]{3,25}" class="form-control"/>
      </label></td>
    </tr>
    <tr>
      <td>Last Name </td>
      <td><label>
          <input type="text" name="textfield2" required pattern="[A-Z a-z.]{1,25}" class="form-control"/>
      </label></td>
    </tr>
    <tr>
      <td>Gender</td>
      <td><label>
       <input type="radio" name="radiobutton" value="Male" checked/>Male
      </label>
      <label>
       <input type="radio" name="radiobutton" value="Female" />Female
      </label>
      </td>
    </tr>
    <tr>
      <td>Place</td>
      <td><label>
        <input type="text" name="textfield3" required pattern="[A-Z a-z.]{3,25}" class="form-control"/>
      </label></td>
    </tr>
    <tr>
      <td>Post</td>
      <td><label>
        <input type="text" name="textfield4" required pattern="[A-Z a-z.]{3,25}" class="form-control"/>
      </label></td>
    </tr>
    <tr>
      <td>Pin</td>
      <td><label>
        <input type="text" name="textfield5" required pattern="[0-9]{6}" class="form-control"/>
      </label></td>
    </tr>
    <tr>
      <td>Phone_no</td>
      <td><label>
        <input type="text" name="textfield6" required pattern="[6789][0-9]{9}"  class="form-control"/>
      </label><div id="p2"> </div></td>
    </tr>
    <tr>
      <td>Email</td>
      <td><label>
        <input type="text" name="textfield7" id="em" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}" class="form-control"/>
      </label><div id="p3"> </div></td>
    </tr>
    <tr>
      <td>Photo</td>
      <td><label>
        <input type="file" name="file" required  accept="image/jpeg,image/png"  />
      </label></td>
    </tr>
    <tr>
      <td>Username</td>
      <td><label>
        <input type="text" name="textfield8" id="un" required pattern="[A-Z a-z]{1,}" class="form-control"/>
      </label><div id="p1"> </div></td>
    </tr>
    <tr>
      <td>Password</td>
      <td><label>
        <input type="text" id="ps" name="textfield9" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required class="form-control"/>
      </label></td>
    </tr>
    <tr>
      <td colspan="2" align="center"><label>
        <div align="center">
          <input type="submit" name="Submit" value="ADD" class="btn btn-secondary"id="b" />
          </div>
      </label></td>
    </tr>
  </table>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script type="text/javascript">
    $("#un").keyup(function () {
      var username = $(this).val();




    $.ajax(
    {
        type:"GET",
        url: "/check_un",
        data:{
                 username: username


        },
        dataType: 'json',
        success: function( data )
        {

            if (data.key) {
                document.getElementById("b").setAttribute("disabled", true);
            document.getElementById("p1").innerText="A user with this username already exists.";
          }
          else {
                document.getElementById("p1").innerText="";
                document.getElementById("b").removeAttribute("disabled");
            }
        }
     })
});
    $("#ph").keyup(function () {
      var phno = $(this).val();




    $.ajax(
    {
        type:"GET",
        url: "/check_ph",
        data:{
                 phno: phno


        },
        dataType: 'json',
        success: function( data )
        {

            if (data.key) {
                document.getElementById("b").setAttribute("disabled", true);
            document.getElementById("p2").innerText="A user with this phone number is already exists.";
          }
          else {
                document.getElementById("p2").innerText="";
                document.getElementById("b").removeAttribute("disabled");
            }
        }
     })
});

     $("#em").keyup(function () {
      var em = $(this).val();




    $.ajax(
    {
        type:"GET",
        url: "/check_em",
        data:{
                 em: em


        },
        dataType: 'json',
        success: function( data )
        {

            if (data.key) {
                document.getElementById("b").setAttribute("disabled", true);
            document.getElementById("p3").innerText="A user with this email is already exists.";
          }
          else {
                document.getElementById("p3").innerText="";
                document.getElementById("b").removeAttribute("disabled");
            }
        }
     })
});
</script>

</form>
{##}
{#<div class="card shadow p-4">#}
{#    <form>#}
{#  <div class="form-group mb-3">#}
{#    <label for="exampleInputEmail1">First Name</label>#}
{#        <input type="text" class="form-control" name="textfield" required/>#}
{#  </div>#}
{#  <div class="form-group">#}
{#    <label for="exampleInputPassword1">Last Name</label>#}
{#        <input type="text" class="form-control" name="textfield2" required/>#}
{#  </div>#}
{##}
{#        <div class="form-group">#}
{#    <label for="exampleInputPassword1">Gender</label>#}
{#   <input name="radiobutton" type="radio" value="Male" checked/>#}
{#        M#}
{#        <input name="radiobutton" type="radio" value="Female" checked/>#}
{#        F  </div>#}
{#        <div class="form-group">#}
{#    <label for="exampleInputPassword1">Last Name</label>#}
{#        <input type="text" class="form-control" name="textfield2" required/>#}
{#  </div>#}
{#        <div class="form-group">#}
{#    <label for="exampleInputPassword1">Last Name</label>#}
{#        <input type="text" class="form-control" name="textfield2" required/>#}
{#  </div>#}
{#        <div class="form-group">#}
{#    <label for="exampleInputPassword1">Last Name</label>#}
{#        <input type="text" class="form-control" name="textfield2" required/>#}
{#  </div>#}
{##}
{#  <button type="submit" class="btn btn-primary">Submit</button>#}
{#</form>#}
{#    </div>#}
{#</body>#}
{#</html>#}
{% endblock %}
